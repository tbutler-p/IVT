"""
This type stub file was generated by pyright.
"""

import numpy as np
from dataclasses import dataclass
from typing import List, Optional, Tuple

@dataclass
class TextDetOutput:
    img: Optional[np.ndarray] = ...
    boxes: Optional[np.ndarray] = ...
    scores: Optional[List[float]] = ...
    elapse: float = ...
    def __len__(self): # -> int:
        ...
    
    def vis(self, save_path: Optional[str] = ...) -> Optional[np.ndarray]:
        ...
    


class DetPreProcess:
    def __init__(self, limit_side_len: int = ..., limit_type: str = ..., mean=..., std=...) -> None:
        ...
    
    def __call__(self, img: np.ndarray) -> Optional[np.ndarray]:
        ...
    
    def normalize(self, img: np.ndarray) -> np.ndarray:
        ...
    
    def permute(self, img: np.ndarray) -> np.ndarray:
        ...
    
    def resize(self, img: np.ndarray) -> Optional[np.ndarray]:
        """resize image to a size multiple of 32 which is required by the network"""
        ...
    


class ResizeImgError(Exception):
    ...


class DBPostProcess:
    """The post process for Differentiable Binarization (DB)."""
    def __init__(self, thresh: float = ..., box_thresh: float = ..., max_candidates: int = ..., unclip_ratio: float = ..., score_mode: str = ..., use_dilation: bool = ...) -> None:
        ...
    
    def __call__(self, pred: np.ndarray, ori_shape: Tuple[int, int]) -> Tuple[np.ndarray, List[float]]:
        ...
    
    def boxes_from_bitmap(self, pred: np.ndarray, bitmap: np.ndarray, dest_width: int, dest_height: int) -> Tuple[np.ndarray, List[float]]:
        """
        bitmap: single map with shape (1, H, W),
                whose values are binarized as {0, 1}
        """
        ...
    
    def get_mini_boxes(self, contour: np.ndarray) -> Tuple[np.ndarray, float]:
        ...
    
    @staticmethod
    def box_score_fast(bitmap: np.ndarray, _box: np.ndarray) -> float:
        ...
    
    def box_score_slow(self, bitmap: np.ndarray, contour: np.ndarray) -> float:
        """use polyon mean score as the mean score"""
        ...
    
    def unclip(self, box: np.ndarray) -> np.ndarray:
        ...
    
    def filter_det_res(self, dt_boxes: np.ndarray, scores: List[float], img_height: int, img_width: int) -> Tuple[np.ndarray, List[float]]:
        ...
    
    def order_points_clockwise(self, pts: np.ndarray) -> np.ndarray:
        """
        reference from:
        https://github.com/jrosebr1/imutils/blob/master/imutils/perspective.py
        sort the points based on their x-coordinates
        """
        ...
    
    def clip_det_res(self, points: np.ndarray, img_height: int, img_width: int) -> np.ndarray:
        ...
    


