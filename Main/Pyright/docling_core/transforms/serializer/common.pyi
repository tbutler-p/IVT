"""
This type stub file was generated by pyright.
"""

from abc import abstractmethod
from pathlib import Path
from typing import Any, Optional, Union
from pydantic import AnyUrl, BaseModel, NonNegativeInt
from typing_extensions import Self, override
from docling_core.transforms.serializer.base import BaseAnnotationSerializer, BaseDocSerializer, BaseFallbackSerializer, BaseFormSerializer, BaseInlineSerializer, BaseKeyValueSerializer, BaseListSerializer, BaseMetaSerializer, BasePictureSerializer, BaseTableSerializer, BaseTextSerializer, SerializationResult
from docling_core.types.doc.document import ContentLayer, DocItem, DoclingDocument, FloatingItem, Formatting, NodeItem
from docling_core.types.doc.labels import DocItemLabel

"""Define base classes for serialization."""
_DEFAULT_LABELS = ...
_DEFAULT_LAYERS = ...
_logger = ...
class _PageBreakNode(NodeItem):
    """Page break node."""
    prev_page: int
    next_page: int
    ...


class _PageBreakSerResult(SerializationResult):
    """Page break serialization result."""
    node: _PageBreakNode
    ...


def create_ser_result(*, text: str = ..., span_source: Union[DocItem, list[SerializationResult]] = ...) -> SerializationResult:
    """Function for creating `SerializationResult` instances.

    Args:
        text: the text the use. Defaults to "".
        span_source: the item or list of results to use as span source. Defaults to [].

    Returns:
        The created `SerializationResult`.
    """
    ...

class CommonParams(BaseModel):
    """Common serialization parameters."""
    labels: set[DocItemLabel] = ...
    layers: set[ContentLayer] = ...
    pages: Optional[set[int]] = ...
    start_idx: NonNegativeInt = ...
    stop_idx: NonNegativeInt = ...
    include_non_meta: bool = ...
    include_formatting: bool = ...
    include_hyperlinks: bool = ...
    caption_delim: str = ...
    use_legacy_annotations: bool = ...
    allowed_meta_names: Optional[set[str]] = ...
    blocked_meta_names: set[str] = ...
    def merge_with_patch(self, patch: dict[str, Any]) -> Self:
        """Create an instance by merging the provided patch dict on top of self."""
        ...
    


class DocSerializer(BaseModel, BaseDocSerializer):
    """Class for document serializers."""
    model_config = ...
    doc: DoclingDocument
    text_serializer: BaseTextSerializer
    table_serializer: BaseTableSerializer
    picture_serializer: BasePictureSerializer
    key_value_serializer: BaseKeyValueSerializer
    form_serializer: BaseFormSerializer
    fallback_serializer: BaseFallbackSerializer
    list_serializer: BaseListSerializer
    inline_serializer: BaseInlineSerializer
    meta_serializer: Optional[BaseMetaSerializer] = ...
    annotation_serializer: BaseAnnotationSerializer
    params: CommonParams = ...
    _excluded_refs_cache: dict[str, set[str]] = ...
    @override
    def get_excluded_refs(self, **kwargs: Any) -> set[str]:
        """References to excluded items."""
        ...
    
    @abstractmethod
    def serialize_doc(self, *, parts: list[SerializationResult], **kwargs: Any) -> SerializationResult:
        """Serialize a document out of its pages."""
        ...
    
    @override
    def serialize(self, *, item: Optional[NodeItem] = ..., list_level: int = ..., is_inline_scope: bool = ..., visited: Optional[set[str]] = ..., **kwargs: Any) -> SerializationResult:
        """Serialize a given node."""
        ...
    
    @override
    def get_parts(self, item: Optional[NodeItem] = ..., *, traverse_pictures: bool = ..., list_level: int = ..., is_inline_scope: bool = ..., visited: Optional[set[str]] = ..., **kwargs: Any) -> list[SerializationResult]:
        """Get the components to be combined for serializing this node."""
        ...
    
    @override
    def post_process(self, text: str, *, formatting: Optional[Formatting] = ..., hyperlink: Optional[Union[AnyUrl, Path]] = ..., **kwargs: Any) -> str:
        """Apply some text post-processing steps."""
        ...
    
    @override
    def serialize_bold(self, text: str, **kwargs: Any) -> str:
        """Hook for bold formatting serialization."""
        ...
    
    @override
    def serialize_italic(self, text: str, **kwargs: Any) -> str:
        """Hook for italic formatting serialization."""
        ...
    
    @override
    def serialize_underline(self, text: str, **kwargs: Any) -> str:
        """Hook for underline formatting serialization."""
        ...
    
    @override
    def serialize_strikethrough(self, text: str, **kwargs: Any) -> str:
        """Hook for strikethrough formatting serialization."""
        ...
    
    @override
    def serialize_subscript(self, text: str, **kwargs: Any) -> str:
        """Hook for subscript formatting serialization."""
        ...
    
    @override
    def serialize_superscript(self, text: str, **kwargs: Any) -> str:
        """Hook for superscript formatting serialization."""
        ...
    
    @override
    def serialize_hyperlink(self, text: str, hyperlink: Union[AnyUrl, Path], **kwargs: Any) -> str:
        """Hook for hyperlink serialization."""
        ...
    
    @override
    def serialize_captions(self, item: FloatingItem, **kwargs: Any) -> SerializationResult:
        """Serialize the item's captions."""
        ...
    
    @override
    def serialize_meta(self, item: NodeItem, **kwargs: Any) -> SerializationResult:
        """Serialize the item's meta."""
        ...
    
    @override
    def serialize_annotations(self, item: DocItem, **kwargs: Any) -> SerializationResult:
        """Serialize the item's annotations."""
        ...
    


