"""
This type stub file was generated by pyright.
"""

from argparse import ArgumentParser, Namespace
from collections import defaultdict
from collections.abc import Mapping
from functools import cached_property
from types import SimpleNamespace
from typing import Annotated, Any, Callable, Generic, NoReturn, Optional, TYPE_CHECKING, TypeVar, Union, overload
from pydantic import BaseModel, Field
from pydantic.fields import FieldInfo
from ..types import NoDecode, _CliExplicitFlag, _CliImplicitFlag, _CliPositionalArg, _CliSubCommand, _CliUnknownArgs
from .env import EnvSettingsSource
from pydantic_settings.main import BaseSettings

"""Command-line interface settings source."""
if TYPE_CHECKING:
    ...
class _CliInternalArgParser(ArgumentParser):
    def __init__(self, cli_exit_on_error: bool = ..., **kwargs: Any) -> None:
        ...
    
    def error(self, message: str) -> NoReturn:
        ...
    


class CliMutuallyExclusiveGroup(BaseModel):
    ...


class _CliArg(BaseModel):
    model: Any
    field_name: str
    arg_prefix: str
    case_sensitive: bool
    hide_none_type: bool
    kebab_case: bool
    enable_decoding: Optional[bool]
    env_prefix_len: int
    args: list[str] = ...
    kwargs: dict[str, Any] = ...
    _alias_names: tuple[str, ...] = ...
    _alias_paths: dict[str, Optional[int]] = ...
    _is_alias_path_only: bool = ...
    _field_info: FieldInfo = ...
    def __init__(self, field_info: FieldInfo, parser_map: defaultdict[str | FieldInfo, dict[Optional[int] | str, _CliArg]], **values: Any) -> None:
        ...
    
    @classmethod
    def get_kebab_case(cls, name: str, kebab_case: Optional[bool]) -> str:
        ...
    
    def subcommand_alias(self, sub_model: type[BaseModel]) -> str:
        ...
    
    @cached_property
    def field_info(self) -> FieldInfo:
        ...
    
    @cached_property
    def subcommand_dest(self) -> Optional[str]:
        ...
    
    @cached_property
    def dest(self) -> str:
        ...
    
    @cached_property
    def preferred_arg_name(self) -> str:
        ...
    
    @cached_property
    def sub_models(self) -> list[type[BaseModel]]:
        ...
    
    @cached_property
    def alias_names(self) -> tuple[str, ...]:
        ...
    
    @cached_property
    def alias_paths(self) -> dict[str, Optional[int]]:
        ...
    
    @cached_property
    def preferred_alias(self) -> str:
        ...
    
    @cached_property
    def is_alias_path_only(self) -> bool:
        ...
    
    @cached_property
    def is_append_action(self) -> bool:
        ...
    
    @cached_property
    def is_parser_submodel(self) -> bool:
        ...
    
    @cached_property
    def is_no_decode(self) -> bool:
        ...
    


T = TypeVar('T')
CliSubCommand = Annotated[Union[T, None], _CliSubCommand]
CliPositionalArg = Annotated[T, _CliPositionalArg]
_CliBoolFlag = TypeVar('_CliBoolFlag', bound=bool)
CliImplicitFlag = Annotated[_CliBoolFlag, _CliImplicitFlag]
CliExplicitFlag = Annotated[_CliBoolFlag, _CliExplicitFlag]
CLI_SUPPRESS = ...
CliSuppress = Annotated[T, CLI_SUPPRESS]
CliUnknownArgs = Annotated[list[str], Field(default=[]), _CliUnknownArgs, NoDecode]
class CliSettingsSource(EnvSettingsSource, Generic[T]):
    """
    Source class for loading settings values from CLI.

    Note:
        A `CliSettingsSource` connects with a `root_parser` object by using the parser methods to add
        `settings_cls` fields as command line arguments. The `CliSettingsSource` internal parser representation
        is based upon the `argparse` parsing library, and therefore, requires the parser methods to support
        the same attributes as their `argparse` library counterparts.

    Args:
        cli_prog_name: The CLI program name to display in help text. Defaults to `None` if cli_parse_args is `None`.
            Otherwise, defaults to sys.argv[0].
        cli_parse_args: The list of CLI arguments to parse. Defaults to None.
            If set to `True`, defaults to sys.argv[1:].
        cli_parse_none_str: The CLI string value that should be parsed (e.g. "null", "void", "None", etc.) into `None`
            type(None). Defaults to "null" if cli_avoid_json is `False`, and "None" if cli_avoid_json is `True`.
        cli_hide_none_type: Hide `None` values in CLI help text. Defaults to `False`.
        cli_avoid_json: Avoid complex JSON objects in CLI help text. Defaults to `False`.
        cli_enforce_required: Enforce required fields at the CLI. Defaults to `False`.
        cli_use_class_docs_for_groups: Use class docstrings in CLI group help text instead of field descriptions.
            Defaults to `False`.
        cli_exit_on_error: Determines whether or not the internal parser exits with error info when an error occurs.
            Defaults to `True`.
        cli_prefix: Prefix for command line arguments added under the root parser. Defaults to "".
        cli_flag_prefix_char: The flag prefix character to use for CLI optional arguments. Defaults to '-'.
        cli_implicit_flags: Whether `bool` fields should be implicitly converted into CLI boolean flags.
            (e.g. --flag, --no-flag). Defaults to `False`.
        cli_ignore_unknown_args: Whether to ignore unknown CLI args and parse only known ones. Defaults to `False`.
        cli_kebab_case: CLI args use kebab case. Defaults to `False`.
        cli_shortcuts: Mapping of target field name to alias names. Defaults to `None`.
        case_sensitive: Whether CLI "--arg" names should be read with case-sensitivity. Defaults to `True`.
            Note: Case-insensitive matching is only supported on the internal root parser and does not apply to CLI
            subcommands.
        root_parser: The root parser object.
        parse_args_method: The root parser parse args method. Defaults to `argparse.ArgumentParser.parse_args`.
        add_argument_method: The root parser add argument method. Defaults to `argparse.ArgumentParser.add_argument`.
        add_argument_group_method: The root parser add argument group method.
            Defaults to `argparse.ArgumentParser.add_argument_group`.
        add_parser_method: The root parser add new parser (sub-command) method.
            Defaults to `argparse._SubParsersAction.add_parser`.
        add_subparsers_method: The root parser add subparsers (sub-commands) method.
            Defaults to `argparse.ArgumentParser.add_subparsers`.
        formatter_class: A class for customizing the root parser help text. Defaults to `argparse.RawDescriptionHelpFormatter`.
    """
    def __init__(self, settings_cls: type[BaseSettings], cli_prog_name: str | None = ..., cli_parse_args: bool | list[str] | tuple[str, ...] | None = ..., cli_parse_none_str: str | None = ..., cli_hide_none_type: bool | None = ..., cli_avoid_json: bool | None = ..., cli_enforce_required: bool | None = ..., cli_use_class_docs_for_groups: bool | None = ..., cli_exit_on_error: bool | None = ..., cli_prefix: str | None = ..., cli_flag_prefix_char: str | None = ..., cli_implicit_flags: bool | None = ..., cli_ignore_unknown_args: bool | None = ..., cli_kebab_case: bool | None = ..., cli_shortcuts: Mapping[str, str | list[str]] | None = ..., case_sensitive: bool | None = ..., root_parser: Any = ..., parse_args_method: Callable[..., Any] | None = ..., add_argument_method: Callable[..., Any] | None = ..., add_argument_group_method: Callable[..., Any] | None = ..., add_parser_method: Callable[..., Any] | None = ..., add_subparsers_method: Callable[..., Any] | None = ..., formatter_class: Any = ...) -> None:
        ...
    
    @overload
    def __call__(self) -> dict[str, Any]:
        ...
    
    @overload
    def __call__(self, *, args: list[str] | tuple[str, ...] | bool) -> CliSettingsSource[T]:
        """
        Parse and load the command line arguments list into the CLI settings source.

        Args:
            args:
                The command line arguments to parse and load. Defaults to `None`, which means do not parse
                command line arguments. If set to `True`, defaults to sys.argv[1:]. If set to `False`, does
                not parse command line arguments.

        Returns:
            CliSettingsSource: The object instance itself.
        """
        ...
    
    @overload
    def __call__(self, *, parsed_args: Namespace | SimpleNamespace | dict[str, Any]) -> CliSettingsSource[T]:
        """
        Loads parsed command line arguments into the CLI settings source.

        Note:
            The parsed args must be in `argparse.Namespace`, `SimpleNamespace`, or vars dictionary
            (e.g., vars(argparse.Namespace)) format.

        Args:
            parsed_args: The parsed args to load.

        Returns:
            CliSettingsSource: The object instance itself.
        """
        ...
    
    def __call__(self, *, args: list[str] | tuple[str, ...] | bool | None = ..., parsed_args: Namespace | SimpleNamespace | dict[str, list[str] | str] | None = ...) -> dict[str, Any] | CliSettingsSource[T]:
        ...
    
    @property
    def root_parser(self) -> T:
        """The connected root parser instance."""
        ...
    


