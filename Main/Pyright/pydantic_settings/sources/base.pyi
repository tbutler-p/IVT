"""
This type stub file was generated by pyright.
"""

from abc import ABC, abstractmethod
from typing import Any, Optional, TYPE_CHECKING
from pydantic.fields import FieldInfo
from .types import PydanticModel
from pydantic_settings.main import BaseSettings

"""Base classes and core functionality for pydantic-settings sources."""
if TYPE_CHECKING:
    ...
def get_subcommand(model: PydanticModel, is_required: bool = ..., cli_exit_on_error: bool | None = ...) -> Optional[PydanticModel]:
    """
    Get the subcommand from a model.

    Args:
        model: The model to get the subcommand from.
        is_required: Determines whether a model must have subcommand set and raises error if not
            found. Defaults to `True`.
        cli_exit_on_error: Determines whether this function exits with error if no subcommand is found.
            Defaults to model_config `cli_exit_on_error` value if set. Otherwise, defaults to `True`.

    Returns:
        The subcommand model if found, otherwise `None`.

    Raises:
        SystemExit: When no subcommand is found and is_required=`True` and cli_exit_on_error=`True`
            (the default).
        SettingsError: When no subcommand is found and is_required=`True` and
            cli_exit_on_error=`False`.
    """
    ...

class PydanticBaseSettingsSource(ABC):
    """
    Abstract base class for settings sources, every settings source classes should inherit from it.
    """
    def __init__(self, settings_cls: type[BaseSettings]) -> None:
        ...
    
    @property
    def current_state(self) -> dict[str, Any]:
        """
        The current state of the settings, populated by the previous settings sources.
        """
        ...
    
    @property
    def settings_sources_data(self) -> dict[str, dict[str, Any]]:
        """
        The state of all previous settings sources.
        """
        ...
    
    @abstractmethod
    def get_field_value(self, field: FieldInfo, field_name: str) -> tuple[Any, str, bool]:
        """
        Gets the value, the key for model creation, and a flag to determine whether value is complex.

        This is an abstract method that should be overridden in every settings source classes.

        Args:
            field: The field.
            field_name: The field name.

        Returns:
            A tuple that contains the value, key and a flag to determine whether value is complex.
        """
        ...
    
    def field_is_complex(self, field: FieldInfo) -> bool:
        """
        Checks whether a field is complex, in which case it will attempt to be parsed as JSON.

        Args:
            field: The field.

        Returns:
            Whether the field is complex.
        """
        ...
    
    def prepare_field_value(self, field_name: str, field: FieldInfo, value: Any, value_is_complex: bool) -> Any:
        """
        Prepares the value of a field.

        Args:
            field_name: The field name.
            field: The field.
            value: The value of the field that has to be prepared.
            value_is_complex: A flag to determine whether value is complex.

        Returns:
            The prepared value.
        """
        ...
    
    def decode_complex_value(self, field_name: str, field: FieldInfo, value: Any) -> Any:
        """
        Decode the value for a complex field

        Args:
            field_name: The field name.
            field: The field.
            value: The value of the field that has to be prepared.

        Returns:
            The decoded value for further preparation
        """
        ...
    
    @abstractmethod
    def __call__(self) -> dict[str, Any]:
        ...
    


class ConfigFileSourceMixin(ABC):
    ...


class DefaultSettingsSource(PydanticBaseSettingsSource):
    """
    Source class for loading default object values.

    Args:
        settings_cls: The Settings class.
        nested_model_default_partial_update: Whether to allow partial updates on nested model default object fields.
            Defaults to `False`.
    """
    def __init__(self, settings_cls: type[BaseSettings], nested_model_default_partial_update: bool | None = ...) -> None:
        ...
    
    def get_field_value(self, field: FieldInfo, field_name: str) -> tuple[Any, str, bool]:
        ...
    
    def __call__(self) -> dict[str, Any]:
        ...
    
    def __repr__(self) -> str:
        ...
    


class InitSettingsSource(PydanticBaseSettingsSource):
    """
    Source class for loading values provided during settings class initialization.
    """
    def __init__(self, settings_cls: type[BaseSettings], init_kwargs: dict[str, Any], nested_model_default_partial_update: bool | None = ...) -> None:
        ...
    
    def get_field_value(self, field: FieldInfo, field_name: str) -> tuple[Any, str, bool]:
        ...
    
    def __call__(self) -> dict[str, Any]:
        ...
    
    def __repr__(self) -> str:
        ...
    


class PydanticBaseEnvSettingsSource(PydanticBaseSettingsSource):
    def __init__(self, settings_cls: type[BaseSettings], case_sensitive: bool | None = ..., env_prefix: str | None = ..., env_ignore_empty: bool | None = ..., env_parse_none_str: str | None = ..., env_parse_enums: bool | None = ...) -> None:
        ...
    
    def __call__(self) -> dict[str, Any]:
        ...
    


__all__ = ['ConfigFileSourceMixin', 'DefaultSettingsSource', 'InitSettingsSource', 'PydanticBaseEnvSettingsSource', 'PydanticBaseSettingsSource', 'SettingsError']
