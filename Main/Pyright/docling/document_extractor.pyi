"""
This type stub file was generated by pyright.
"""

from collections.abc import Iterable, Iterator
from pathlib import Path
from typing import Optional, Type, Union
from pydantic import ConfigDict, model_validator, validate_call
from typing_extensions import Self
from docling.datamodel.base_models import BaseFormatOption, DocumentStream, InputFormat
from docling.datamodel.extraction import ExtractionResult, ExtractionTemplateType
from docling.datamodel.settings import PageRange
from docling.pipeline.base_extraction_pipeline import BaseExtractionPipeline

"""
This type stub file was generated by pyright.
"""
_log = ...
_PIPELINE_CACHE_LOCK = ...
class ExtractionFormatOption(BaseFormatOption):
    """Per-format configuration for extraction.

    Notes:
        - `pipeline_cls` must subclass `BaseExtractionPipeline`.
        - `pipeline_options` is typed as `PipelineOptions` which MUST inherit from
          `BaseOptions` (as used by `BaseExtractionPipeline`).
        - `backend` is the document-opening backend used by `_DocumentConversionInput`.
    """
    pipeline_cls: Type[BaseExtractionPipeline]
    @model_validator(mode="after")
    def set_optional_field_default(self) -> Self:
        ...
    


class DocumentExtractor:
    """Standalone extractor class.

    Public API:
        - `extract(...) -> ExtractionResult`
        - `extract_all(...) -> Iterator[ExtractionResult]`

    Implementation intentionally reuses `_DocumentConversionInput` to build
    `InputDocument` with the correct backend per format.
    """
    def __init__(self, allowed_formats: Optional[list[InputFormat]] = ..., extraction_format_options: Optional[dict[InputFormat, ExtractionFormatOption]] = ...) -> None:
        ...
    
    @validate_call(config=ConfigDict(strict=True))
    def extract(self, source: Union[Path, str, DocumentStream], template: ExtractionTemplateType, headers: Optional[dict[str, str]] = ..., raises_on_error: bool = ..., max_num_pages: int = ..., max_file_size: int = ..., page_range: PageRange = ...) -> ExtractionResult:
        ...
    
    @validate_call(config=ConfigDict(strict=True))
    def extract_all(self, source: Iterable[Union[Path, str, DocumentStream]], template: ExtractionTemplateType, headers: Optional[dict[str, str]] = ..., raises_on_error: bool = ..., max_num_pages: int = ..., max_file_size: int = ..., page_range: PageRange = ...) -> Iterator[ExtractionResult]:
        ...
    


