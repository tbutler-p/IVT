"""
This type stub file was generated by pyright.
"""

import numpy as np
from collections.abc import Iterable
from pathlib import Path
from typing import Optional, Union
from PIL.Image import Image
from docling.datamodel.accelerator_options import AcceleratorOptions
from docling.datamodel.base_models import VlmPrediction
from docling.datamodel.pipeline_options_vlm_model import InlineVlmOptions
from docling.models.base_model import BaseVlmModel
from docling.models.utils.hf_model_download import HuggingFaceModelDownloadMixin

_log = ...
def process_all_vision_info(messages, examples=...): # -> list[Any] | None:
    """
    Process vision information from both messages and in-context examples, supporting batch processing.

    Args:
        messages: List of message dictionaries (single input) OR list of message lists (batch input)
        examples: Optional list of example dictionaries (single input) OR list of example lists (batch)

    Returns:
        A flat list of all images in the correct order:
        - For single input: example images followed by message images
        - For batch input: interleaved as (item1 examples, item1 input, item2 examples, item2 input, etc.)
        - Returns None if no images were found
    """
    ...

class NuExtractTransformersModel(BaseVlmModel, HuggingFaceModelDownloadMixin):
    def __init__(self, enabled: bool, artifacts_path: Optional[Path], accelerator_options: AcceleratorOptions, vlm_options: InlineVlmOptions) -> None:
        ...
    
    def process_images(self, image_batch: Iterable[Union[Image, np.ndarray]], prompt: Union[str, list[str]]) -> Iterable[VlmPrediction]:
        """
        Batched inference for NuExtract VLM using the specialized input format.

        Args:
            image_batch: Iterable of PIL Images or numpy arrays
            prompt: Either:
                - str: Single template used for all images
                - list[str]: List of templates (one per image, must match image count)
        """
        ...
    


