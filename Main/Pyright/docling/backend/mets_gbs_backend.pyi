"""
This type stub file was generated by pyright.
"""

from collections.abc import Iterable
from dataclasses import dataclass
from enum import Enum
from io import BytesIO
from pathlib import Path
from typing import Optional, Set, TYPE_CHECKING, Union
from docling_core.types.doc import BoundingBox, Size
from docling_core.types.doc.page import SegmentedPdfPage, TextCell
from PIL import Image
from PIL.Image import Image as PILImage
from docling.backend.pdf_backend import PdfDocumentBackend, PdfPageBackend
from docling.datamodel.base_models import InputFormat
from docling.datamodel.document import InputDocument

"""Backend for GBS Google Books schema."""
if TYPE_CHECKING:
    ...
_log = ...
class MetsGbsPageBackend(PdfPageBackend):
    def __init__(self, parsed_page: SegmentedPdfPage, page_im: PILImage) -> None:
        ...
    
    def is_valid(self) -> bool:
        ...
    
    def get_text_in_rect(self, bbox: BoundingBox) -> str:
        ...
    
    def get_segmented_page(self) -> Optional[SegmentedPdfPage]:
        ...
    
    def get_text_cells(self) -> Iterable[TextCell]:
        ...
    
    def get_bitmap_rects(self, scale: float = ...) -> Iterable[BoundingBox]:
        ...
    
    def get_page_image(self, scale: float = ..., cropbox: Optional[BoundingBox] = ...) -> Image.Image:
        ...
    
    def get_size(self) -> Size:
        ...
    
    def unload(self) -> None:
        ...
    


class _UseType(str, Enum):
    IMAGE = ...
    OCR = ...
    COORD_OCR = ...


@dataclass
class _FileInfo:
    file_id: str
    mimetype: str
    path: str
    use: _UseType
    ...


@dataclass
class _PageFiles:
    image: Optional[_FileInfo] = ...
    ocr: Optional[_FileInfo] = ...
    coordOCR: Optional[_FileInfo] = ...


class MetsGbsDocumentBackend(PdfDocumentBackend):
    def __init__(self, in_doc: InputDocument, path_or_stream: Union[BytesIO, Path]) -> None:
        ...
    
    def page_count(self) -> int:
        ...
    
    def load_page(self, page_no: int) -> MetsGbsPageBackend:
        ...
    
    def is_valid(self) -> bool:
        ...
    
    @classmethod
    def supported_formats(cls) -> Set[InputFormat]:
        ...
    
    @classmethod
    def supports_pagination(cls) -> bool:
        ...
    
    def unload(self) -> None:
        ...
    


