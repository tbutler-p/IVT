"""
This type stub file was generated by pyright.
"""

from io import BytesIO
from pathlib import Path
from typing import Final, Optional, Union
from bs4 import PageElement, Tag
from docling_core.types.doc import DoclingDocument, RefItem, TableData, TableItem
from docling_core.types.doc.document import Formatting
from pydantic import AnyUrl, BaseModel
from typing_extensions import override
from docling.backend.abstract_backend import DeclarativeDocumentBackend
from docling.datamodel.backend_options import HTMLBackendOptions
from docling.datamodel.base_models import InputFormat
from docling.datamodel.document import InputDocument

_log = ...
DEFAULT_IMAGE_WIDTH = ...
DEFAULT_IMAGE_HEIGHT = ...
_BLOCK_TAGS: Final = ...
_CODE_TAG_SET: Final = ...
_FORMAT_TAG_MAP: Final = ...
class _Context(BaseModel):
    list_ordered_flag_by_ref: dict[str, bool] = ...
    list_start_by_ref: dict[str, int] = ...


class AnnotatedText(BaseModel):
    text: str
    hyperlink: Union[AnyUrl, Path, None] = ...
    formatting: Union[Formatting, None] = ...
    code: bool = ...


class AnnotatedTextList(list):
    def to_single_text_element(self) -> AnnotatedText:
        ...
    
    def simplify_text_elements(self) -> AnnotatedTextList:
        ...
    
    def split_by_newline(self): # -> list[Any]:
        ...
    


class HTMLDocumentBackend(DeclarativeDocumentBackend):
    @override
    def __init__(self, in_doc: InputDocument, path_or_stream: Union[BytesIO, Path], options: HTMLBackendOptions = ...) -> None:
        ...
    
    @override
    def is_valid(self) -> bool:
        ...
    
    @classmethod
    @override
    def supports_pagination(cls) -> bool:
        ...
    
    @override
    def unload(self): # -> None:
        ...
    
    @classmethod
    @override
    def supported_formats(cls) -> set[InputFormat]:
        ...
    
    @override
    def convert(self) -> DoclingDocument:
        ...
    
    @staticmethod
    def group_cell_elements(group_name: str, doc: DoclingDocument, provs_in_cell: list[RefItem], docling_table: TableItem) -> RefItem:
        ...
    
    @staticmethod
    def process_rich_table_cells(provs_in_cell: list[RefItem], group_name: str, doc: DoclingDocument, docling_table: TableItem) -> tuple[bool, Union[RefItem, None]]:
        ...
    
    def parse_table_data(self, element: Tag, doc: DoclingDocument, docling_table: TableItem, num_rows: int, num_cols: int) -> Optional[TableData]:
        ...
    
    @staticmethod
    def get_html_table_row_col(tag: Tag) -> tuple[int, int]:
        ...
    
    @staticmethod
    def get_text(item: PageElement) -> str:
        """Concatenate all child strings of a PageElement.

        This method is equivalent to `PageElement.get_text()` but also considers
        certain tags. When called on a <p> or <li> tags, it returns the text with a
        trailing space, otherwise the text is concatenated without separators.
        """
        ...
    


